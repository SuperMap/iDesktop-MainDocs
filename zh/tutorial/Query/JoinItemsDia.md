---
id: JoinItemsDia
title: 设置连接表
---
通过设置关联字段，为当前（源）数据集设置与之相关联的数据集，以增加源数据集的字段信息，便于 SQL 查询和 SQL 条件的构建等。

“连接表设置”对话框中的表格区域，每条记录对应一个关联关系，单击对话框中的“添加”按钮，将新建一个关联关系，支持相同数据集设置多个连接关系。下面详细介绍每个字段的含义：

  * **名称** ：标识所建立的关联关系，便于区分不同的连接设置。连接的名称支持编辑。
  * **关联表达式** ：显示了连接本表和外接表的连接条件。用户在进行了外接表、本表字段等设置后，应用程序会自动生成连接条件。
  * **外接表** ：与当前（源）数据集属性表相关联的数据集。单击该单元格，该单元格右侧出现下拉按钮，单击下拉按钮弹出下拉菜单，列出了源数据集所在数据源下，除该数据集外的所有具有属性表的数据集，用户可以选择某个数据集作为关联数据集。
  * **本表字段** ：源数据集属性表中某个字段，通过该字段与关联数据集建立关联关系。单击该单元格，该单元格右侧出现下拉按钮，单击下拉按钮弹出下拉菜单，列出了源数据集的所有字段，用户可以选择某个字段作为关联字段。
  * **外接表字段** ：外接表中的某个字段，通过该字段与源数据集建立关联关系。单击该单元格，该单元格右侧出现下拉按钮，单击下拉按钮弹出下拉菜单，列出了该外接表中的所有字段，用户可以选择某个字段作为关联字段。
  * **连接类型** ：支持左连接、内连接两种方式。 
    * 左连接：连接后有效的记录数与源数据集相同，可用的字段值为源数据集中所有字段值，以及关联数据集中所有相匹配的字段值。 
    * 内连接：连接后有效的记录数是源数据集与关联数据集中完全匹配的记录数，可用的字段值为源数据集和关联数据集中完全匹配的字段值。

![](img/close.gif)连接类型示例：

**源数据集属性表**  

 本表字段 | 字段2  
 ---|---  
1 | 1A  
2 | 2B  
3 | 3C  
4 | 4D    
**关联数据集属性表**
| 外接表字段 | 字段 3  
---|---  
1 | 10  
2 | 20  
3 | 30  
5 | 50    
**“左连接”查询结果属性表**
|  关联字段 | 字段 2 | 字段 3  
---|---|---  
1 | 1A | 10  
2 | 2B | 20  
3 | 3C | 30  
4 | 4D |    
**“内连接”查询结果属性表**
| 关联字段 | 字段 2 | 字段 3  
---|---|---  
1 | 1A | 10  
2 | 2B | 20  
3 | 3C | 30  
|  |  
  
  * “ **添加** ”按钮：添加一个新的连接表。
  * “ **删除** ”按钮：删除表格区域中选中的记录，即取消所建立的相应的关联关系。
  * “ **全选** ”按钮：全部选中表格区域中的记录。
  * “ **反选** ”按钮：反向选中表格区域中的记录。
  * “ **确定** ”按钮：应用所设置的内容，关闭“连接表设置”对话框。返回到“SQL查询”对话框，在“字段信息”框中会添加关联表数据集的所有字段信息。如下图：  

![](img/Fields.png)  

  * “ **取消** ”按钮：取消连接表设置的内容，关闭“连接表设置”对话框。

### ![](../img/note.png)注意事项

  * 建议关联字段（本表字段、外接表字段）为整型，同时建议使用有索引的字段做关联字段 。
  * PostGIS 数据源中的数据集添加外部连接表后，在进行SQL查询、显示过滤等构建表达式操作时，程序将自动为表名添加引号，以解决数据库内部表名区分大小写问题。 

