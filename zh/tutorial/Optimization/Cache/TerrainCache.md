---
id: TerrainCache
title: 生成三维地形缓存
---
**使用说明**

地形缓存用来对地形数据生成缓存文件，优化地形数据的显示和浏览效果。

**操作步骤**

  1. 在数据集右键菜单中选择“生成缓存...”。
  2. 弹出“生成场景缓存”对话框，用来添加地形数据和设置地形缓存的参数。默认选中的数据集已经被添加在列表中，如果需要添加其他栅格数据集，单击 ![](img/AddDataSet.png)，弹出“选择”对话框，在对话框左侧列举了当前的工作空间中的所有数据源，右侧列举了该数据源中所有的数据集。用户可以利用对话框上方的工具条对所需要的数据集进行筛选和查找，选择完成后，单击“确定”按钮。
  3. 返回“生成场景缓存”对话框，可以看到选择的地形数据集显示在列表中。  
![图：生成场景缓存对话框](img/TerrainCacheDia.png)  

  4. 数据列表区域（如数字1所示）：
       * **数据集：** 显示了用于生成地形缓存的数据集名称；
       * **数据源：** 显示了用于生成地形缓存的数据集所在的数据源的名称；
       * **缓存类型：** 显示了所要生成的三维缓存的类型，在此为“地形”。缓存类型为下拉按钮，下拉列表中列出了所选数据所支持的所有缓存类型，用户可从中进行选择；
       * **场景类型：** 场景类型分为两种：平面和球面。当数据集为平面坐标系时，场景类型只能设置为平面；当数据集为地理坐标系时，场景类型只能设置为球面；当数据集为投影坐标系时，场景类型可设置为平面或球面。
  5. 地形缓存参数的设置（如数字2所示）：
       * **缓存名称：** 在“缓存名称”右侧的文本框中输入缓存名称，即缓存根目录的名称。
       * **缓存路径：** 在“缓存路径”右侧的文本框中输入缓存的输出路径，可以为本地路径，也可以为网络路径；用户还可以通过文本框后的“浏览”按钮来选择路径。
       * **存储类型:** 系统提供了2种缓存类型，紧凑和原始。紧凑表示采用一定的压缩和加密机制，在建立缓存时对数据进行压缩和加密；原始表示不对数据进行压缩，保留影像数据的原始信息。
       * **编码方式：** 支持 LZW 编码方式。关于编码方式的介绍，请参见[数据集编码压缩方式](../../DataProcessing/DataManagement/EncodeType  )页面。
       * **块大小（像素）：** 获取缓存预处理后生成的每个缓存分块文件的采样尺寸，单位为像素，即 pixes*pixes。应用程序提供了128*128，64*64，32*32等尺寸共用户选择。用户可以选择合适的尺寸大小。
       * **开始层、结束层** ：自动获取地形缓存的层编号，可修改。
       * **线程数** ：支持设置线程数，默认为1。
  6. 设置“缓存范围”（如数字3所示）。在“缓存范围”区域进行设置，有下面两种方式：
       * 勾选“默认”复选框，默认采用数据集的范围，左上右下四个文本框显示了系统默认范围；
       * 不勾选“默认”复选框，用户可自定义范围。有两种方式，一种是通过选择范围数据集，取选择的数据集的范围；另一种是直接在左上右下四个文本框中输入范围值。 
  7. “比例尺设置”处显示了当前数据的影像金字塔比例尺层级，在此处勾选层级比例尺，即可按照剖分规则，对每一分层的影像数据进行分块，每一分块对应的区域范围的数据将存储为一个切片文件（缓存图片），从而得到地形缓存数据。
  8. 默认勾选“显示进度条”，单击“生成”按钮，执行地形缓存生成操作。每个地形缓存单独存放在一个文件夹下，如示例中的JingjinTerrain数据集生成的缓存文件存放于" D:\DatasetDSM@DatasetDSM" 文件夹下。其中 DatasetDSM@DatasetDSM.sct 为缓存配置文件。

**备注**

关于全球剖分规则的介绍可以参照[缓存目录其他层级结构构建基础](../../ApplicationTheme/CacheBuild/ImageCache4Base  )中的简介。

**注意事项**

  1. 缓存范围设置时，在不勾选“默认”复选框时，左下右上的文本框变为可编辑状态，可以直接输入需要的缓存范围。
  2. 只有数据为地理坐标系时，支持设置线程参数为多线程。

  

 

