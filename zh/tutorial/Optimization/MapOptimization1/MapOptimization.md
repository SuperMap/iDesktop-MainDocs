---
id: MapOptimization
title: 地图显示优化
---
本文总结了应用程序中主要影响地图显示性能及显示效果的因素，并提供了相应的优化策略。当然，同一幅地图的显示性能与美观效果往往不能同时兼具，用户可根据具体情况灵活选择。

  1\. 地图显示效果优化

  2\. 地图显示速度优化

## 1\. 地图显示效果优化

优化地图的显示效果的方式包括：地图反走样、图层顺序调整、文本层叠优化等。

###  启用地图反走样

**反走样：**
在光栅图形显示器上绘制非水平且非垂直的直线或多边形边界时，或多或少会呈现锯齿状或台阶状外观。这是因为直线、多边形、色彩边界等是连续的，而光栅则是由离散的点组成，在光栅显示设备上表现直线、多边形等，必须在离散位置采样。由于采样不充分重建后造成的信息失真，就叫"走样"。而用于减少或消除这种效果的技术，就称为反走样。

**地图反走样：**
针对地图信息失真，对地图中的直线、多边形、文本等的进行的反走样处理，包括线型反走样和文本反走样。反走样需要在图层透明度为0的情况下，同时开启地图反走样和图层反走样才可生效，开启地图反走样的同时，需在“
**图层属性** ”面板中勾选“反走样显示”复选框。

如何设置地图反走样效果，具体内容请参见[启用线型反走样](../../Visualization/AdvanceSetting/LineAntialiasing  )和[启用文本反走样](../../Visualization/AdvanceSetting/TextAntialiasing  )。

###  调整图层顺序

一幅地图中，各图层的层叠顺序将直接影响地图的显示效果。对地图的图层顺序进行调整，是一种最基本、最简单的地图显示效果的优化方式。

关于调整图层顺序的基本依据以及操作步骤，请参见[调整图层顺序](../../Visualization/AdvanceSetting/SettingLayerOrder  )。

###  优化文本层叠效果

在地图显示中，多个文本之间可以会出现层叠的情况，影响地图显示效果，最好的解决办法有两种：

  * 通过过滤显示，过滤掉部分层叠文本，根据层叠文本存在的优先级或特定需要保留一个完整的文本对象。
  * 在适当范围内，在文本同时显示的情况下，通过文本之间的自动避让解决层叠情况。 

为了解决文本层叠情况，应用程序提供了压盖文本过滤显示与自动避让的功能。

**文本过滤显示**

对于文本图层，可设置不显示压盖的文本对象，自动过滤掉后输入的文本对象，从而避免压盖现象出现。如何过滤压盖的文本对象，具体内容请参见[过滤地图中的压盖文本](../../Visualization/AdvanceSetting/OverlapObj  )。

**文本自动避让**

对于标签专题图，通过设置文本自动避让，可在适当范围内让标签同时显示而不互相影响，具体内容请参见标签专题图中的[“属性”选项卡](../../Mapping/LabelMap/PropertiesDia  )。

###  压盖设置

在实际制图过程中，当地图中图层较多的时候，很容易出现不同图层之间的压盖对象，比如点图层和标签专题图图层发生压盖、多个标签图层互相压盖等。压盖设置功能和点随标签避让功能帮助用户实现压盖对象的控制、点与其标签的避让问题。具体内容请参阅[压盖设置](OverlaySetting  )。

###  交叉线优化

在地图中，常会遇到交叉线的情况，例如水系、道路等。如果只不作处理，按照正常情况显示，不仅不够美观，而且可能与实际情况不相符，不能正确表达交叉线之间的连通性。

在制作地图过程中，为了达到真实的显示效果，需要对这种类似“十字路口”的交叉线进行优化。

![未使用十字路口优化](img/Cross1.png) ![使用十字路口优化 ](img/Cross2.png)  
  
SuperMap Desktop桌面应用程序为此提供了“十字路口显示优化”的功能来实现上面的需求。如下图所示对普通的双线道路、三岔路进行优化，而对于立交桥、高速公路等不使用十字路口优化。借助[图层控制](../../Visualization/LayerManagement/LayerControl  )功能，可以方便地实现不同图层的优化效果。关于十字路口优化的更多内容，请参见[启用十字路口优化](../../Visualization/AdvanceSetting/RoadCross  )。

![未使用十字路口优化](img/Crossmap1.png)  ![使用十字路口优化](img/Crossmap2.png)  

  
## 2\. 地图显示速度优化

在应用程序中，对地图显示速度的优化，主要通过减少地图中显示的图层和显示的对象，提高显示与浏览速度的目的。优化地图显示速度的方式包括：对象过滤显示、图层过滤显示、地图缓存等。

###  对象过滤显示

地图显示时，为了提高浏览速度，经常需要把一些对象根据一定的条件进行过滤。

**过滤显示对象**

应用程序提供了过滤显示条件的功能对图层中的对象进行过滤显示。通过设置过滤表达式，仅在地图图层中显示满足条件的几何对象。具体内容请参见[过滤显示地图中的对象](../../Visualization/AdvanceSetting/FilterObjects  )。

**对象尺寸过滤显示**

在地图中，有些过小的对象需要被过滤掉，以避免影响显示速度。例如：将某个线图层中屏幕长度小于等于20mm的线对象过滤掉，从而不在图层中显示。

应用程序提供了设置显示对象的最小尺寸功能，可将地图图层中对象最小外接矩形长边长的屏幕长度小于等于设定长度的几何对象（点对象除外）过滤掉。如何设置显示对象的最小尺寸，请参见[设置显示对象的最小尺寸](../../Visualization/AdvanceSetting/ObjectSize  )。

**文本字高过滤显示**

应用程序提供了过滤显示条件的功能对图层中文本的字高进行过滤显示。通过设置过滤表达式，仅在地图中显示字高范围内的文本对象。具体内容请参见[设置显示文本的尺寸范围](../../Visualization/AdvanceSetting/VisiableRanges  )。

###  图层过滤显示

应用程序提供了图层过滤显示的功能，主要是指图层比例尺过滤显示。包括：对图层设置可见比例尺和使用固定比例尺。

**图层显示控制**

在应用程序中，可以通过“可显示”功能控制某一个图层是否显示。

有的地图中可能存在几十个或上百个图层，有些图层可能不需要显示（比如，已经对某个矢量图层制作了专题图，显示了专题图图层，可不用显示原图层），就可以取消图层“可显示”而将该图层过滤掉。设置图层不显示的操作是开启图层显示的逆操作，具体请参阅[开启图层显示](../../DataProcessing/Objects/SelectObjects/DTv2_Visible  )。

**图层比例尺过滤显示**

在地图显示中，经常会遇到根据不同的比例尺过滤图层，例如：

  * 当前地图中，A 图层小于当前比例尺将不显示，或大于当前比例尺将不显示；
  * 当前地图中，A 图层在比例尺为1：10000时显示，在1：50000时不显示。 

在不同比例尺下，应用程序提供了设置图层可见比例尺范围的功能，用户可根据制图需要控制图层在哪些比例尺范围中显示，具体内容请参阅[设置图层可见比例尺范围](../../Visualization/AdvanceSetting/ScaleRanges  )。

**使用固定比例尺**

当制图数据量比较大，地图放大缩小时速度可能会受到影响。可通过对地图设置一系列固定比例尺，提高地图显示速度。

设置一系列比例尺，则在对地图进行缩放时，系统会按照设定的比例尺缩放地图。例如设置四个固定比例尺1：10000、1：25000、1：50000、1：100000，若地图当前比例尺为1:30000，则放大地图后，其比例尺变为1：25000，再放大，比例尺边为1：10000，然后地图就不再执行放大操作；若接着再缩小地图，其比例尺会变为1：25000，然后变为1：50000，1：100000，接下来地图也不再执行缩小操作。

###  地图缓存

地图缓存功能是指对地图按照设置的比例尺和缓存范围生成一系列的缓存图片。在浏览此地图时可以直接读取缓存中的图片，从而提高地图显示的速度。关于地图缓存的生成与加载，请参阅[生成地图缓存](../../Optimization/Cache/2DCache  )和[加载缓存](../../Optimization/Cache/AddingCache)。
