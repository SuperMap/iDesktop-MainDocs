---
id: ImportCAD
title: CAD 文件的导入  
---  
### ![](../../img/read.gif)使用说明

支持导入 AutoCAD 的2种格式，DWG 和 DXF。DXF，Drawing Interchange Format（图形交换格式）的缩写形式，是
Autodesk 公司开发的 AutoCAD 与其他软件格式数据交换的文件格式。这是图形文件的 ASCII
或二进制文件格式，用于向其他应用程序输出图形和从其他应用程序输入图形。DWG 是 AutoCAD 的图形文件，专门用于保存矢量图形的标准文件格式。

支持导入和导出 AutoCAD 2007及以前版本的文件。

### ![](../../img/read.gif)功能入口

* **开始** 选项卡-> **数据处理** -> **数据导入** 或下拉按钮。
* 在工作空间管理器中选中需导入到的 **数据源** ->单击鼠标右键-> **导入数据集...** 。
* **工具箱** -> **数据导入** -> **AutoCAD** 中的工具： **导入.DXF、导入.DWG、导入.DGN** 。(iDesktopX)

### ![](../../img/read.gif)参数说明

1. 在 **数据导入** 对话框中单击 **添加文件** 按钮，弹出 **打开** 对话框，在该对话框中定位到要导入的数据所在的路径，并将其打开。
2. 结果设置中的目标数据源、结果数据集、编码类型、导入模式，以及源文件信息的参数说明，请参见[数据导入公共参数](ParameterSettingDia)说明页面。
3. **结果设置**
    * 数据集类型：选择导入后的数据集类型，复合数据集或者简单数据集。 
      * 复合数据集：选择此项，则将数据文件导入为 CAD 数据集。  
      * 简单数据集：选择此项，则将数据文件导入为简单数据集，即点、线、面、文本、属性、复合线、复合面数据集。
    * **创建空间索引** ：勾选该项可按数据集支持的索引类型，对数据集创建空间索引，提高数据的空间查询和访问效率。
    * **导入空数据集** ：勾选该复选框，若导入数据集为空数据集时，默认导入一个无对象的空数据集。否则，程序会提示导入失败。
4. **转换参数**
    * **曲线拟合精度** ：用来设置导入数据时的线对象或面对象的边线精度，系统默认为73。仅在导入 AutoCAD DXF(*.dxf)文件和 ArtoCAD Drawing(*.dwg) 文件时起作用，其他数据格式下被忽略。
    * **字体库设置** ：若导入的源文件有相关的字体文件(*.shx)，需要在此处添加一并导入，避免出现 CAD 数据中的字体缺失、显示不全的情况。
    * **合并图层** ：选中此复选框，则在导入 DWG/DXF 文件时，将所有图层合并为一个图层导入。导入时，默认将多个 CAD 图层合并为一个图层。
    * **导入符号块** ：该复选框用于设置在导入 DWG/DXF 文件时，是否导入块对象，或将其视为点对象导入。默认导入符号块。
    * **导入扩展数据** ：用于在导入 CAD 格式的图形数据时，同时导入 AutoCAD 制图中类似属性表的数据。外部扩展数据导入后格式为一些额外的字段。该项仅在导入 AutoCAD DXF 文件(*.dxf) 和 ArtoCAD Drawing 文件(*.dwg) 时起作用。系统默认为不勾选该复选框，即不导入外部扩展数据；若勾选该复选框，则在导入 CAD 格式的数据时，将外部扩展数据追加在默认字段后面。 
    * **导入不可见图层** ：选中此复选框，则在导入 DWG/DXF 文件时，导入 AutoCAD 图形文件中不可见的图层。在 AutoCAD 中，图层不可见比较实用，当存在多个图层时，不同的图层保存不同类型的对象，当不需要显示该类对象时，直接将该层设置为不可见，下次使用时设置为可见。
    * **导入块属性** ：勾选该复选框，则在导入时会导入数据的块属性；不勾选该复选框，则导入时会忽略块属性。
    * **导入扩展记录** ：勾选该复选框，则会将用户自定义的字段及属性字段作为扩展记录导入；不勾选该复选框则表示不导入用户自定义的字段和属性字段。
    * **保留对象高度** ：在导入 CAD 包含三维对象（如三维多段线），选中该项，则导入时会保留三维对象的高度信息（对象的 Z 坐标值）；不勾选该项，则导入后不保留高度信息。成功导入 DWG/DXF 后，在生成的数据集的属性表中会生成 Elevation 字段，存储对象的高度信息。
    * **保持参数化对象** ：在导入 CAD 包含参数化对象，选中该项，导入后生成的 CAD 数据集中包含带有参数化对象的复合面或者复合线对象；不勾选该项，则导入后不包含参数化对象。
    * **保留多义线宽度** ：选中此复选框，则在导入 DWG/DXF 文件时，保留 AutoCAD 图形文件中的多义线（Polyline）的宽度。在 CAD 里面，多义线是由一系列直线和弧线组的多段线，各段线可以单独定义线宽。默认保留原始定义的多义线宽度。
    * **设置缩放因子** ：当导入的数据为*.dwg数据时，支持设置数据的 X、Y、Z 方向的缩放比例值。
5. **风格设置** ：支持添加风格对照表设置导入后CAD风格。 

**风格对照表**：风格对照表文件扩展名为*.stt,包含7部分：风格对照表的表头，对照表的版本，线型对照，字体对照，填充对照，符号对照，dxffile文件，如下例所示：
```
SuperMap Style Mapping Table  
Version 6.0

LineStyleBegin  
(id:Continuous),(id:963867;c:0xff0000;w:1)  
LineStyleEnd

SymbolBegin  
(id:GROUND),(id:1110;g:根组;c:0x0000ff;a:0; s:1)  
SymbolEnd

FillStyleBegin  
(id:ANGLE),(id:015;a:60;fc:0xff0000;bc:0x000000)  
FillStyleEnd

FontBegin  
(id:arial),(id:System;a:0;fc:0x00ff00;bc:0x000000;xs:1;ys:1)  
FontEnd

dxffile  
Expstyle.dxf  

```

其中：SuperMap Style Mapping Table 为风格对照表的表头部分；Version 6.0
为当前对照表的版本；LineStyleBegin 为线型对照的开头；LineStyleEnd 为线型对照的结尾；SymbolBegin
为符号对照的开头；SymbolEnd 为符号对照的结尾；FillStyleBegin 为填充对照的开头；FillStyleEnd 为填充对照的结尾
；FontBegin 为字体对照的开头；FontEnd 为字体对照的结尾；dxffile 为标识保存风格的dxf文件的标签,为导出用。

  * **线型对照** ：线型对照部分由关键词 LineStyleBegin 开始，由关键词 LineStyleEnd 结束，他们之间每一行定义一种线型对应关系。线型对应关系由两个域组成，域之间以分隔符","隔开。域的组成如下：   
    
  域1 | 域2  
  ---|---  
  外部数据线型名称 | SuperMap 数据线型名称；颜色;宽度(单位是mm)    
    
  * **符号对照** ：符号对照部分由关键词 SymbolBegin 开始，由关键词 SymbolEnd 结束，他们之间每一行定义一种符号对应关系。符号对应关系由两个域组成，域之间以分隔符","隔开。域的组成如下：   

  域1 | 域2  
  ---|---  
  对照的块儿参照或者dgn的cell名称 | SuperMap符号名称；符号所在组名称；符号颜色；符号倾斜角度；符号缩放比    

  * **填充对照** ：填充对照部分由关键词 FillStyleBegin 开始，由关键词 FillStyleEnd 结束，他们之间每一行定义一种填充对应关系。填充对应关系由两个域组成，域之间以分隔符","隔开。域的组成如下：    
    
  域1 | 域2  
  ---|---  
  外部填充模式名称 | SuperMap填充名称；填充旋转角度；填充的前景色；填充的背景色    

  * **字体对照** ：字体对照部分由关键词 FontBegin 开始，由关键词 FontEnd 结束，他们之间每一行定义一种字体对应关系。字体对应关系由两个域组成，域之间以分隔符","隔开。域的组成如下：   
    
  域1 | 域2  
  ---|---  
  外部字体名称 | SuperMap字体名称;字体旋转角度;字体前景色;字体背景色;字体x缩放比;字体y缩放比  

  * **dxffile文件** ：dxffile文件由关键词dxffile标识，为导出dxf和dwg格式使用，导入时该标签无效，可省略。 

  dxffile标签指示的dxf文件为用户自定义文件，可以保存块、线风格、文本风格定义。

  符号、线型对照所有的风格都由dxf保存的块和线型来定义；填充风格只对照实体填充并且填充图案比例始终是1；文本字高、颜色和SuperMap保持一致，其余和dxf定义风格一致。

  导出时设置了风格对照，但dxf文件中未定义，仍按照默认风格设置。

  * 设置完成后，单击“导入”按钮，执行导入 CAD 文件的操作。

### ![](../../img/read.gif)备注

若导入的数据中包含参数化对象，导入时勾选“保持参数化对象”复选框，根据所选择的数据集类型不同，分为以下两种情况：

* 复合数据集：若导入时选择数据集类型为“复合数据集”，导入后生成的 CAD 数据集中包含带有参数化对象的复合面或者复合线对象。
* 简单数据集：若导入时选择数据集类型为“简单数据集”，导入后会单独生成 复合面或者复合线数据集用于存储参数化对象。
