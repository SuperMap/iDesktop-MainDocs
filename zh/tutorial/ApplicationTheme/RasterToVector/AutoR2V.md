---
id: AutoR2V
title: 栅格自动矢量化
---
删格数据自动矢量化可以极大的提高栅格矢量化的效率，栅格转矢量的方式主要适用于线条清晰的删格数据，具体操作有以下几步：

1. **导入**

导入待矢量化的影像数据，导入为栅格或影像数据都可以。

![](img/ImportRaster.png)  
  
2. **配准**

若导入进来的栅格数据是没有空间位置信息，为了对扫描进来的栅格数据赋予实际地物空间的位置，需要对其进行配准，对栅格图进行坐标和投影的校正，以使得其坐标准确。同时配准也可以纠正扫描时由于各种因素引起的图形变形。关于配准功能的详细介绍，请参考[配准](../../DataProcessing/Registration/Registration.htm)专题。

3. **栅格二值化处理**

如果栅格数据的线条清晰简洁，则不需要进行二值化处理，否则需要通过栅格代数运算进行二值化处理：首先观察栅格数据中线条与背景值的差异，设定阈值，例如，如果所有线条的栅格值大于10000，背景值小于10000，则可以通过栅格代数式Con（dem > 10000，1，0）将背景值和线条值二值化处理为0和1。

4. **栅格自动矢量化**
    1. 在“空间分析”选项卡的“栅格分析”组中，单击“矢栅转换”下拉按钮，选择“栅格矢量化”选项，弹出“栅格矢量化”对话框。 
    2. 在“源数据”处选择待矢量化的栅格数据集，对于进行了二值化处理的栅格数据，需要选择二值化处理后的数据集。
    3. 在“结果数据”区域选择结果数据集要保存在的数据源，选择结果数据集类型，可以是点数据集、线数据集、或者面数据集，并设置结果数据集的名称。
    4. 若结果数据集类型选择的是线，可以设置结果线数据的相应参数，如下所述： 
      * **光滑方法** ：只在栅格转为矢量线数据时有效，SuperMap 提供两种光滑处理的方法，“B 样条法”和“磨角法”，若想了解更多光滑过程可以参照光滑方法说明文档。 
      * **光滑系数** ：只在栅格转为矢量线数据时且“光滑方法”不是“不进行光滑”时有效，光滑系数的有效取值与光滑方法有关,当光滑方法为 B 样条法时，光滑系数的值小于 2 时将不会进行光滑；当采用磨角法时，光滑系数的值设置为大于等于 1 时有效。 光滑系数的值越大，则结果矢量线的光滑度越高。 
      * **细化预处理** ：选中此选项，则在矢量化前先对栅格数据进行细化处理。细化处理可以减少栅格数据中标识线性对象的单元格的数量，提高矢量化的速度和精度。例如一幅扫描的等高线图上可能使用5、6个单元格来显示一条等高线的宽度，细化处理后，等高线的宽度就只用一个单元格来显示了。也可以预先对栅格/影像数据进行细化处理，然后再矢量化。关于栅格细化功能的介绍，请参阅栅格细化。
    5. “栅格设置”区域的参数只对栅格数据集矢量化时生效，对影像数据集进行矢量化时不生效。 无值：对栅格数据集，像元值为此设定值的单元格被视为无值数据不参与矢量化过程。 无值容限：“无值数据”设定好像元值后设置该“无值容限”值，则“无值数据”的像元值及容限范围内的像元值均视为不参与矢量化过程的数据单元。 栅格值字段：用来将每个单元格的栅格值存储到结果数据集中的字段中。栅格值字段的名称在后面的文本框中指定。默认字段名称为 value。 只转换指定栅格值：仅提取单元格值等于设定值的区域进行矢量化。 栅格值：像元值为此设定值的单元格参与矢量化过程。 栅格值容限：设置指定“栅格值”的容限范围，在指定“栅格值"及浮动容限范围内的栅格值参与矢量化过程。 
5. 在“ **源数据** ”区域选择要进行处理的数据集。 
  * **数据源** ：在右侧下拉列表中，列出了当前工作空间下所有的数据源，选择将要被矢量化的栅格数据集所在的数据源。
  * **数据集** ：在右侧下拉列表中，列出了所选数据源中的栅格数据集和影像数据集，选择将要进行矢量化的数据集。
6. 在“ **结果数据** ”区域设置矢量化后生成的结果数据集的位置和名称。 
  * **数据源** ：选择保存矢量化生成的结果数据集所在的数据源位置。
  * **数据集类型** ：选择矢量化生成的数据集类型，可以是点数据集、线数据集、或者面数据集。
  * **数据集名称** ：为矢量化生成的结果数据集命名。
7. “ **矢量线设置** ”区域的参数只有在 **结果数据** 的“ **数据集类型** ”选择为“线数据集”的时候才生效。 
  * **光滑方法** ：只在栅格转为矢量线数据时有效，SuperMap 提供两种光滑处理的方法，“B 样条法”和“磨角法”，若想了解更多光滑过程可以参照[光滑方法说明](../../DataProcessing/Vector/SmoothMeth.htm)文档。
  * **光滑系数** ：只在栅格转为矢量线数据时且“光滑方法”不是“不进行光滑”时有效，光滑系数的有效取值与光滑方法有关,当光滑方法为 B 样条法时，光滑系数的值小于 2 时将不会进行光滑；当采用磨角法时，光滑系数的值设置为大于等于 1 时有效。 光滑系数的值越大，则结果矢量线的光滑度越高。
  * **细化预处理** ：选中此选项，则在矢量化前先对栅格数据进行细化处理。细化处理可以减少栅格数据中标识线性对象的单元格的数量，提高矢量化的速度和精度。例如一幅扫描的等高线图上可能使用5、6个单元格来显示一条等高线的宽度，细化处理后，等高线的宽度就只用一个单元格来显示了。也可以预先对栅格/影像数据进行细化处理，然后再矢量化。关于栅格细化功能的介绍，请参阅[栅格细化](ThinRaster.htm)。

8. “ **栅格设置** ”区域的参数只对栅格数据集矢量化时生效，对影像数据集进行矢量化时不生效。 
  * **无值** ：对栅格数据集，像元值为此设定值的单元格被视为无值数据不参与矢量化过程。
  * **无值容限** ：“无值数据”设定好像元值后设置该“无值容限”值，则“无值数据”的像元值及容限范围内的像元值均视为不参与矢量化过程的数据单元。
  * **栅格值字段** ：用来将每个单元格的栅格值存储到结果数据集中的字段中。栅格值字段的名称在后面的文本框中指定。默认字段名称为 value。
  * **只转换指定栅格值** ：仅提取单元格值等于设定值的区域进行矢量化。 
    * 栅格值：像元值为此设定值的单元格参与矢量化过程。
    * 栅格值容限：设置指定“栅格值”的容限范围，在指定“栅格值"及浮动容限范围内的栅格值参与矢量化过程。
9. 在“ **影像设置** ”区域的参数只对影像数据集矢量化时生效，对栅格数据集进行矢量化时不生效。 
  * **背景色** ：对影像数据集，若遇到此种颜色的单元格，则将其视为背景色，不参与矢量化过程。 
  * **背景色容限** ：对于影像数据集选择了背景色后，数据集中若某个单元格的 RGB 值在背景色的浮动容限范围内，则该单元格也被作为背景色，不参与矢量化过程。容限值同时对应 RBG 三个值，比如容限值取10，那么颜色值（R±10、B±10、G±10 ）范围内的色值就是容限范围内，容限值取值范围（0～255）。
10. 单击“ **确定** ”按钮执行矢量化操作，单击“ **取消** ”按钮撤销操作。
![](img/AutoR2V.png)  

11. 自动转换的结果通常需要进行部分的手动调整，可以通过“对象编辑”功能对结果数据集进行增、删、改等编辑处理，具体操作可参见[对象编辑](../../DataProcessing/Objects/EditObjects/EdittingGeometry.htm)章节。
  

