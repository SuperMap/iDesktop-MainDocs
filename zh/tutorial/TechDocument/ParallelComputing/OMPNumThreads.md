---
id: OMPNumThreads
title: 设置线程数目
---
线程数目的设置有两种方式，一种是直接在“环境”对话框中设置；另一种是修改配置文件。具体设置方式如下：

  * 单击“文件”按钮，在菜单中选择“选项”，在弹出的“选项”对话框的“环境”设置页面中，直接设置“并行计算线程数”即可，详细说明请参见[环境](../../StartMenu/Environment)页面。
  * 系统配置文件 SuperMap.xml 中的  节点用于指定线程数目，初始值为 2。SuperMap.xml 位于组件产品安装目录\Bin 文件夹下。例如，设置线程数目为 4，则配置文件应修改为：
   
    ` <OMPNumThreads>4</OMPNumThreads> `

**以上两种方式有一些区别和需注意的地方：**

  1. 应用程序启动时会优先读取配置文件中的线程数，在程序运行过程中可在“并行计算线程数”处修改线程数目，若为修改则使用程序启动时从配置文件中读取到的值。
  2. 在“并行计算线程数”处修改线程数会立即生效，同时会自动修改配置文件中的值；而配置文件中的线程数目只在应用程序启动时被读取一次，手动修改配置文件后，需要重新启动应用程序才能生效。
  3. 线程数目的有效范围为 1-16。如果配置文件中的线程数目超出范围，则设置无效，使用默认值 2；如果在“并行计算线程数”处设置的值大于16，则设置的值会自动调整为16。

对于 **如何设置合理的线程数目** ，可以参考以下建议：

  * 指定的多个线程将在计算机处理器所有核之间分配，当线程数目等于处理器总核数时，所有核都参与计算，可以充分利用计算机的计算资源。
  * 线程数目多于计算机核数时，线程调度与负载均衡问题可能导致占用更多时间，即使分析计算的时间进一步降低，也可能导致整体性能提升不明显。因此不建议这样做。

### ![](../../img/read.gif) 相关内容

  [多线程并行计算](ParallelComputing)

  [支持并行计算的功能](ParallelFunction)


