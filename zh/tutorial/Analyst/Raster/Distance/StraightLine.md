---
id: StraightLine
title: 生成距离栅格
---
### ![](../../../img/read.gif)使用说明

生成距离栅格功能，用来计算每个单元格到最近源（源是我们感兴趣的地物、对象，如水井、道路或学校）的距离，并使用此距离值给栅格像元赋值，生成距离数据集。同时根据像元到最近源的方向生成方向数据集；根据最近源的选择可以确定每个源覆盖的服务范围，从而生成分配数据集。

生成距离栅格时，可以指定耗费数据，得到耗费距离栅格。耗费距离栅格分析的源数据可以是矢量数据（点、线、面），也可以是栅格数据。与直线距离栅格分析结果类似，耗费距离栅格分析的结果包含：耗费距离栅格数据集、耗费方向栅格数据集、耗费分配栅格数据集三个数据集；其中耗费距离栅格得到的是每个单元格到最近的源的最小累积耗费值，这包含了两层意义，一是分配给每个像元的源的依据是从该像元到所有的源中耗费最小的一个；另外，像元值是该单元格到该源的多条路径中的最小累积耗费。耗费数据是可选参数，可以不设置，则会得到直线距离栅格结果。

### ![](../../../img/read.gif)功能入口

  * **空间分析** 选项卡-> **栅格分析** 组-> **距离栅格** 下拉按钮->“ **生成耗费距离栅格** ”。

### ![](../../../img/read.gif)参数设置

  * **源数据** ：在该对话框中，设置源数据的数据源，并选择存放源数据的数据集。源数据中是我们感兴趣的地物或者对象，如水井、道路或学校等，可以是矢量数据，也可以是栅格数据。
  * **耗费数据** ：设置存放耗费数据的数据源。并选择该数据源中的耗费栅格数据集，栅格数据集支持空数据集，但栅格数据集不能存在负值，否则程序会提出警告“ **耗费栅格中不能存在负值！** ”。 

耗费数据集给定每个像元的耗费成本，可以是高度、坡度等，例如翻越一座山到达目的地的路程可能较短，但是绕行它的时间则可能要长一些。

  * **参数设置** ：设置距离栅格参数,包括最大距离和分辨率。 
    - **最大距离** ：用来设置生成的距离栅格的最大距离，大于该距离的栅格则在结果数据集中取无值。默认值为0，表示结果不受距离限制。该参数可选。

    - **分辨率** ：设置结果数据集的分辨率。默认值使用源数据集范围对应矩形对角线长度的500分之一。该参数可选。

  * 设置结果数据。选择结果数据要保存的数据源，距离栅格数据、方向栅格数据和分配栅格数据结果名称。默认生成的距离数据集名称为 DistanceGird，方向数据集为 DirectionGrid，分配数据集为 AllocationGrid。注意：当方向数据集和分配数据集的名称为空时，不会生成这两个栅格数据集。距离数据集的名称必须设置。
  * 单击“ **环境设置** ”按钮，设置分析环境参数，生成距离栅格支持设置的分析环境参数包括结果数据集的地理范围、裁剪范围、默认输出分辨率等，具体操作请参见[设置分析环境](../../Raster/AnalystEnvironment.html)页面。 

注意：支持将环境参数设置为全局变量，即将此处设置的参数值作为总栅格环境分析环境参数，其他支持环境参数设置的功能，无需再重复设置。如果在此处不设置环境参数，则分析时读取栅格分析环境中该参数的设置。

### ![](../../../img/note.png) 备注

在生成距离栅格时，为了节省存储空间，应用程序根据不同结果数据集栅格值的值域范围来确定数据集的像素格式，这样就会对得到的方向和分配结果数据的空值产生影响。 

* **不使用耗费数据生成距离栅格**

方向数据的取值范围为[0,360]，采用双字节进行存储，此时空值为-9999。而分配结果数据集具体采用哪种像素格式由生成距离栅格的源数据中的对象个数来决定。例如源数据中有3个对象，则得到的方向数据集像素格式为4位，空值为15。

* **使用耗费数据生成距离栅格**

方向数据的取值范围为[0,7]，用4位进行存储，空值为15。而分配结果数据像素格式具体采用哪种像素格式，由生成距离栅格的源数据中的对象个数来决定。例如源数据中有16个对象，则生成的分配距离结果数据集的像素格式为单字节，空值为255。

### ![](../../../img/seealso.png) 相关主题

关于生成的结果数据集，距离栅格、方向栅格和分配栅格数据的介绍，请参见[距离栅格概述](RasterDistance)的相关介绍。

![](../../../img/smalltitle.png) [距离栅格](RasterDistance)

![](../../../img/smalltitle.png) [方向栅格](RasterDistance)

![](../../../img/smalltitle.png) [分配栅格](RasterDistance)
