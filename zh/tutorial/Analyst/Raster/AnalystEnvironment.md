---
id: AnalystEnvironment
title: 设置分析环境
---
在进行栅格分析时，需要明确栅格分析的环境设置情况，栅格分析环境的设置，会在一定程度上影响栅格分析的结果。分析环境包括结果数据集的地理范围、裁剪范围、默认输出分辨率等参数进行设定，其中结果数据集的地理范围和裁剪范围是确定数据有效区域的参数。

目前，栅格分析环境的设置，矢栅转换、距离栅格分析、插值分析、栅格代数运算、通视分析及栅格概况（如栅格重分级、重采样等）操作中的分析功能有效。

在“ **空间分析** ”选项卡“ **栅格分析** ”组中，单击“ **环境设置**
”按钮，可以弹出“栅格分析环境设置”对话框，对栅格分析相关的参数进行设置。

### 结果数据地理范围

在进行栅格分析时，参与分析的范围是输入栅格数据集的一个子集时，可将分析范围设置为仅包含所需像元的一个地理范围。则所有结果数据集会按照设定的范围生成。结果数据的地理范围实际是一个矩形，由上、下、左、右四个角点的坐标值共同决定。默认的范围为参加分析的数据集的交集。

也可以通过其他方式设置结果数据地理范围。其他设置的方式包括，设置为参加分析的数据集的并集，设置为某一数据集的范围（即与某一个数据集的地理范围保持一致），也可以指定范围，通过手动输入上、下、左、右四个角点的坐标值自定义一个地理范围。

在“结果数据地理范围”项中，选择一种设置方式，设置结果数据的地理范围。若选择“自定义范围”，则有以下三种设置方式：

 * **整幅地图** ：单击选中“整幅地图”单选框，即可将当前地图中的所有图层范围的并集设置为输出范围；
 * 下拉按钮提供了 **选择对象** 和 **绘制范围** 两种方式： 
    * **选择对象** ：单击下拉按钮选择“选择对象”选项，即可在当前地图窗口中通过鼠标框选或点选方式，选中一个或多个对象，将选中对象范围设置为输出范围；
    * **绘制范围** ：单击下拉按钮选择“绘制范围”选项，即可在当前地图窗口中通过单击鼠标绘制，确定一个矩形区域为输出范围。
 * **复制粘贴** ：单击“ **复制** ”按钮可复制当前设置的范围，在支持粘贴的范围设置处单击“粘贴”按钮，即可将复制范围的左、下、右、上值设置到当前范围。

### 裁剪范围

当用户设置了裁剪范围，程序只对裁剪范围内的数据进行栅格分析。裁剪数据集必须是一个矢量数据集（必须是面数据集）。分析结果会按照裁剪数据集定义的裁剪范围提取相应的栅格范围。位于裁剪范围之外的像元在分析结果中将不会被保留，或者像元值被设置为无值。

在“裁剪范围”项中，选择裁剪数据所在的数据源以及数据集，即可完成结果数据地理范围的设置。

**注意** ：设置裁剪范围后，结果数据地理范围将以裁剪范围为准。没有设置裁剪范围时，会默认使用设置的结果数据地理范围。

### 默认输出分辨率

输出分辨率是指在生成新的栅格（或影像）数据集时所采用的分辨率。

栅格分析结果的输出分辨率或者像元大小可以设置为任何大小分辨率。默认的输出分辨率大小为栅格分析的数据集的最大分辨率。

也可以通过其他方式设置默认输出分辨率。其他设置方式包括，与参加分析的数据集的最大分辨率保持一致，与当前选中的数据集的分辨率大小保持一致，或者通过输入数值指定分辨率大小。在“默认输出分辨率”项中，选择一种设置方式，设置默认的结果数据集分辨率大小。

  * 所有数据集的最大分辨率：从所有数据集中选择分辨率最大的作为输出时使用的分辨率。
  * 所有数据集的最小分辨率：从所有数据集中选择分辨率最小的作为输出时使用的分辨率。
  * 指定一个参考的数据集的分辨率作为默认输出分辨率。
  * 自定义分辨率：选择自定义分辨率后激活“分辨率”文本框，输入用户指定的分辨率作为默认输出分辨率。

栅格分析环境设置，主要包括对地理范围、单元格大小、有效分析区域的数据有效区域、像素格式及目标路径等参数进行设定。目前，栅格分析环境的设置，只对矢栅转换、距离栅格分析、插值分析、栅格代数运算、通视分析及栅格概况（如栅格重分级、重采样等）操作中的分析功能有效。

**注意** ：栅格分析环境的各个参数设置并不都对以上各类有效，其具体的支持情况如下表1中所示。

**表1：栅格分析环境参数设置对各分析功能的支持情况**  
参数类型 | 矢栅转换 | 距离分析 | 栅格概况 | 插值分析 | 栅格代数运算 | 可视性分析  
---|---|---|---|---|---|---
结果数据地理范围类型 | × | √① | × | × | √ | ×  
结果数据的地理范围 | × | √① | × | √ | √ | ×  
裁剪范围 | √ | √① | √ | √ | √ | ×  
结果数据集的单元格大小类型 | × | √① | × | √ | × | ×  
结果数据集的单元格大小 | √ | √① | × | √ | × | ×  
  
**备注：**

① 对于距离分析，结果数据地理范围类型、结果数据的地理范围、结果数据集的单元格大小类型、结果数据集的单元格大小,只对生成距离栅格和计算最短路径有效。

② 栅格代数运算中，从 XML 文件中读取栅格运算表达式及相关参数并运算 是否显示进度条由存储的 XML 文件的值决定。

需要强调的是：如果在单个功能中，也设置了 **表1**
中的某个栅格分析环境，那么，单个功能中的参数设置的优先级高于栅格分析环境中对应的参数设置，且功能中与栅格分析环境设置中的参数对应的参数，如果设置为
null，则分析时读取栅格分析环境中该参数的设置。
